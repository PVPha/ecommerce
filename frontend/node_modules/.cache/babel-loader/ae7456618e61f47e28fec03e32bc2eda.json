{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\freelancerCoder\\\\Ecommerce\\\\frontend\\\\src\\\\components\\\\admin\\\\Dashboard\\\\Collection\\\\DashboardCollectionCreate.js\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport axios from \"axios\";\nexport default function DashboardCollectionCreate(props) {\n  const createForm = useRef();\n  const [collectionName, setCollectionName] = useState(\"\");\n  const [product, setProduct] = useState([]);\n  const [productList, setProductList] = useState([]);\n  const [newsImg, setNewsImg] = useState([]);\n  const [file, setFile] = useState([]);\n\n  const onSubmit = event => {\n    event.preventDefault();\n    const config = {\n      headers: {\n        \"content-type\": \"multipart/form-data\"\n      }\n    };\n    const formData = new FormData();\n    let collectionItems = [];\n\n    for (let i in productList) {\n      collectionItems.push(productList[i]._id);\n    }\n\n    const imageArr = Array.from(file);\n    imageArr.forEach(image => {\n      formData.append(\"collectionBanner\", image);\n    });\n    formData.append(\"collectionName\", collectionName);\n    formData.append(\"collectionItems\", collectionItems);\n    axios.post(\"http://be-ecommerce-year4.herokuapp.com/collection\", formData, config).then(() => {\n      props.setCloseCreateFunc(false);\n      props.setToastFunc(true);\n    });\n  };\n\n  const deleteImg = event => {\n    const virutalFile = [...file];\n    virutalFile.splice(event.target.id, 1);\n    setFile(virutalFile);\n    const items = [...newsImg];\n    items.splice(event.target.id, 1);\n    setNewsImg(items);\n  };\n\n  useEffect(() => {\n    axios.get(`http://be-ecommerce-year4.herokuapp.com/products`).then(res => {\n      setProduct(res.data);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"DashboardProductInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, \"Order infomation\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title-close flex-center\",\n    onClick: () => {\n      props.setCloseCreateFunc(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTimes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    encType: \"multipart/form-data\",\n    ref: createForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    value: collectionName || \"\",\n    onChange: event => {\n      setCollectionName(event.target.value);\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, \"Collection Banner \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: event => {\n      const files = event.target.files;\n\n      for (let i = 0; i < files.length; i++) {\n        setNewsImg(news => [...news, URL.createObjectURL(files[i])]);\n      }\n\n      const fileArr = Array.prototype.slice.call(files);\n      fileArr.forEach(item => {\n        setFile(file => [...file, item]);\n      });\n    },\n    type: \"file\",\n    name: \"newsImg\",\n    className: \"noborder\",\n    multiple: \"multiple\",\n    style: {\n      height: \"50px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    style: {\n      overflowY: \"hidden\",\n      flexWrap: \"wrap\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, newsImg && newsImg.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"create-box-img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      key: index,\n      src: item,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"create-box-img-overlay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      id: index,\n      onClick: deleteImg,\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 27\n      }\n    }, \"X\")));\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, \"Items\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"input\",\n    style: {\n      height: \"25px\",\n      marginBottom: \"10px\"\n    },\n    value: \"\",\n    onChange: event => {\n      const isExists = (cartItems = [], item = {}) => {\n        for (let cartItem of cartItems) {\n          if (cartItem._id === item._id) {\n            return cartItem;\n          }\n        }\n\n        return false;\n      };\n\n      const value = event.target.value;\n      const virtualCart = [...productList];\n\n      if (productList.length === 0) {\n        virtualCart.push({ ...JSON.parse(value),\n          count: 1\n        });\n      } else {\n        if (!isExists(productList, JSON.parse(value))) {\n          virtualCart.push({ ...JSON.parse(value),\n            count: 1\n          });\n        } else {\n          for (let i = 0; i < virtualCart.length; i++) {\n            if (virtualCart[i]._id === JSON.parse(value)._id) {\n              virtualCart[i].count += 1;\n              break;\n            }\n          }\n        }\n      }\n\n      setProductList(virtualCart);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    selected: true,\n    value: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 17\n    }\n  }, \"select a product\"), product.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      value: JSON.stringify(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }, \"Name: \", item.productName, \", Price:\", \" \", item.productFinalPrice.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\"), \" \", \"\\u0111\");\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    style: {\n      overflowY: \"hidden\",\n      flexWrap: \"wrap\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 15\n    }\n  }, productList && productList.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"order-list-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"data:image/png;base64,\" + item.productImg[0],\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        width: \"55%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 25\n      }\n    }, item.productName), /*#__PURE__*/React.createElement(\"div\", {\n      id: index,\n      className: \"delete-order-item flex-center\",\n      onClick: event => {\n        var arr = [];\n        const id = event.target.id;\n\n        for (let i in productList) {\n          if (i !== id) {\n            arr.push(productList[i]);\n          }\n        }\n\n        setProductList(arr);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      style: {\n        pointerEvents: \"none\"\n      },\n      icon: faTimes,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 27\n      }\n    })));\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-center\",\n    style: {\n      marginTop: \"40px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"create-box-btn btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }\n  }, \"Create collection\")))));\n}","map":{"version":3,"sources":["C:/Users/Admin/Desktop/freelancerCoder/Ecommerce/frontend/src/components/admin/Dashboard/Collection/DashboardCollectionCreate.js"],"names":["React","useEffect","useRef","useState","FontAwesomeIcon","faTimes","axios","DashboardCollectionCreate","props","createForm","collectionName","setCollectionName","product","setProduct","productList","setProductList","newsImg","setNewsImg","file","setFile","onSubmit","event","preventDefault","config","headers","formData","FormData","collectionItems","i","push","_id","imageArr","Array","from","forEach","image","append","post","then","setCloseCreateFunc","setToastFunc","deleteImg","virutalFile","splice","target","id","items","get","res","data","value","files","length","news","URL","createObjectURL","fileArr","prototype","slice","call","item","height","overflowY","flexWrap","map","index","marginBottom","isExists","cartItems","cartItem","virtualCart","JSON","parse","count","stringify","productName","productFinalPrice","toString","replace","productImg","width","arr","pointerEvents","marginTop"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\r\nimport axios from \"axios\";\r\n\r\nexport default function DashboardCollectionCreate(props) {\r\n  const createForm = useRef();\r\n\r\n  const [collectionName, setCollectionName] = useState(\"\");\r\n  const [product, setProduct] = useState([]);\r\n  const [productList, setProductList] = useState([]);\r\n  const [newsImg, setNewsImg] = useState([]);\r\n  const [file, setFile] = useState([]);\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    const config = {\r\n      headers: {\r\n        \"content-type\": \"multipart/form-data\",\r\n      },\r\n    };\r\n\r\n    const formData = new FormData();\r\n    let collectionItems = [];\r\n    for (let i in productList) {\r\n      collectionItems.push(productList[i]._id);\r\n    }\r\n\r\n    const imageArr = Array.from(file);\r\n    imageArr.forEach((image) => {\r\n      formData.append(\"collectionBanner\", image);\r\n    });\r\n    formData.append(\"collectionName\", collectionName);\r\n    formData.append(\"collectionItems\", collectionItems);\r\n    axios\r\n      .post(\r\n        \"http://be-ecommerce-year4.herokuapp.com/collection\",\r\n        formData,\r\n        config\r\n      )\r\n      .then(() => {\r\n        props.setCloseCreateFunc(false);\r\n        props.setToastFunc(true);\r\n      });\r\n  };\r\n\r\n  const deleteImg = (event) => {\r\n    const virutalFile = [...file];\r\n    virutalFile.splice(event.target.id, 1);\r\n    setFile(virutalFile);\r\n\r\n    const items = [...newsImg];\r\n    items.splice(event.target.id, 1);\r\n    setNewsImg(items);\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`http://be-ecommerce-year4.herokuapp.com/products`)\r\n      .then((res) => {\r\n        setProduct(res.data);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"DashboardProductInfo\">\r\n      <div className=\"create-box\">\r\n        <div className=\"create-box-title flex\">\r\n          <div className=\"create-box-title-text\">Order infomation</div>\r\n          <div\r\n            className=\"create-box-title-close flex-center\"\r\n            onClick={() => {\r\n              props.setCloseCreateFunc(false);\r\n            }}\r\n          >\r\n            <FontAwesomeIcon icon={faTimes} />\r\n          </div>\r\n        </div>\r\n        <form\r\n          onSubmit={onSubmit}\r\n          encType=\"multipart/form-data\"\r\n          ref={createForm}\r\n        >\r\n          <div className=\"create-box-row flex\">\r\n            <div className=\"dashboard-left flex\">Name</div>\r\n            <div className=\"dashboard-right\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"name\"\r\n                value={collectionName || \"\"}\r\n                onChange={(event) => {\r\n                  setCollectionName(event.target.value);\r\n                }}\r\n                required\r\n              ></input>\r\n            </div>\r\n          </div>\r\n          <div className=\"create-box-row flex\">\r\n            <div className=\"dashboard-left flex\">Collection Banner </div>\r\n            <div className=\"dashboard-right\">\r\n              <input\r\n                onChange={(event) => {\r\n                  const files = event.target.files;\r\n                  for (let i = 0; i < files.length; i++) {\r\n                    setNewsImg((news) => [\r\n                      ...news,\r\n                      URL.createObjectURL(files[i]),\r\n                    ]);\r\n                  }\r\n                  const fileArr = Array.prototype.slice.call(files);\r\n                  fileArr.forEach((item) => {\r\n                    setFile((file) => [...file, item]);\r\n                  });\r\n                }}\r\n                type=\"file\"\r\n                name=\"newsImg\"\r\n                className=\"noborder\"\r\n                multiple=\"multiple\"\r\n                style={{ height: \"50px\" }}\r\n              ></input>\r\n              <div\r\n                className=\"flex\"\r\n                style={{ overflowY: \"hidden\", flexWrap: \"wrap\" }}\r\n              >\r\n                {newsImg &&\r\n                  newsImg.map((item, index) => {\r\n                    return (\r\n                      <div key={index} className=\"create-box-img\">\r\n                        <img key={index} src={item} alt=\"\"></img>\r\n                        <div className=\"create-box-img-overlay\">\r\n                          <p id={index} onClick={deleteImg} className=\"icon\">\r\n                            X\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"create-box-row flex\">\r\n            <div className=\"dashboard-left flex\">Items</div>\r\n            <div className=\"dashboard-right\">\r\n              <select\r\n                className=\"input\"\r\n                style={{ height: \"25px\", marginBottom: \"10px\" }}\r\n                value={\"\"}\r\n                onChange={(event) => {\r\n                  const isExists = (cartItems = [], item = {}) => {\r\n                    for (let cartItem of cartItems) {\r\n                      if (cartItem._id === item._id) {\r\n                        return cartItem;\r\n                      }\r\n                    }\r\n                    return false;\r\n                  };\r\n\r\n                  const value = event.target.value;\r\n                  const virtualCart = [...productList];\r\n                  if (productList.length === 0) {\r\n                    virtualCart.push({ ...JSON.parse(value), count: 1 });\r\n                  } else {\r\n                    if (!isExists(productList, JSON.parse(value))) {\r\n                      virtualCart.push({ ...JSON.parse(value), count: 1 });\r\n                    } else {\r\n                      for (let i = 0; i < virtualCart.length; i++) {\r\n                        if (virtualCart[i]._id === JSON.parse(value)._id) {\r\n                          virtualCart[i].count += 1;\r\n                          break;\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  setProductList(virtualCart);\r\n                }}\r\n              >\r\n                <option selected value>\r\n                  select a product\r\n                </option>\r\n                {product.map((item, index) => {\r\n                  return (\r\n                    <option key={index} value={JSON.stringify(item)}>\r\n                      Name: {item.productName}, Price:{\" \"}\r\n                      {item.productFinalPrice\r\n                        .toString()\r\n                        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")}{\" \"}\r\n                      Ä‘\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n              <div\r\n                className=\"\"\r\n                style={{ overflowY: \"hidden\", flexWrap: \"wrap\" }}\r\n              >\r\n                {productList &&\r\n                  productList.map((item, index) => {\r\n                    return (\r\n                      <div key={index} className=\"order-list-item\">\r\n                        <img\r\n                          src={\"data:image/png;base64,\" + item.productImg[0]}\r\n                          alt=\"\"\r\n                        ></img>\r\n                        <p style={{ width: \"55%\" }}>{item.productName}</p>\r\n                        <div\r\n                          id={index}\r\n                          className=\"delete-order-item flex-center\"\r\n                          onClick={(event) => {\r\n                            var arr = [];\r\n                            const id = event.target.id;\r\n                            for (let i in productList) {\r\n                              if (i !== id) {\r\n                                arr.push(productList[i]);\r\n                              }\r\n                            }\r\n                            setProductList(arr);\r\n                          }}\r\n                        >\r\n                          <FontAwesomeIcon\r\n                            style={{ pointerEvents: \"none\" }}\r\n                            icon={faTimes}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex-center\" style={{ marginTop: \"40px\" }}>\r\n            <button className=\"create-box-btn btn\">Create collection</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}