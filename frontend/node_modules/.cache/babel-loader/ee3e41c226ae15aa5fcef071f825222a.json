{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\freelancerCoder\\\\Ecommerce\\\\frontend\\\\src\\\\components\\\\Header\\\\Account.js\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport \"../../App.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes, faCheck } from \"@fortawesome/free-solid-svg-icons\";\nimport axios from \"axios\";\nimport { withRouter } from \"react-router-dom\";\nimport { UserContext } from \"../../contexts/User\";\nimport AccountInfo from \"./AccountInfo\";\n\nfunction Account(props) {\n  const {\n    setUserInfoFunc\n  } = useContext(UserContext);\n  const [check, setCheck] = useState(false);\n  const [tabID, setTabID] = useState(0);\n  const [arrSuccess, setArrSuccess] = useState([]);\n  const [arrErr, setArrErr] = useState([]);\n  const [user, setUser] = useState({});\n  const [login, setLogin] = useState(false);\n\n  const handleOnChange = event => {\n    setUser({ ...user,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleOnSubmit = event => {\n    event.preventDefault();\n\n    if (tabID === 0) {\n      axios.post(\"http://localhost:4000/users/login\", {\n        loginEmail: user.loginEmail,\n        loginPassword: user.loginPassword\n      }).then(res => {\n        console.log(res.user);\n        setArrSuccess(arrSuccess => [...arrSuccess, \"Login success!\"]);\n        setTimeout(() => {\n          window.location.reload(false);\n          document.body.style.overflow = \"unset\";\n        }, 1000);\n        localStorage.setItem(\"token\", res.data.token);\n        localStorage.setItem(\"user-id\", res.data.user._id);\n      }).catch(err => {\n        setArrErr(arrErr => [...arrErr, err.response.data]);\n      });\n    } else {\n      axios.post(\"http://localhost:4000/users/register\", {\n        userName: user.registerName,\n        userEmail: user.registerEmail,\n        userPassword: user.registerPassword,\n        userRole: \"user\"\n      }).then(res => {\n        setArrSuccess(arrSuccess => [...arrSuccess, res.data]);\n        setTimeout(() => {\n          window.location.reload(false);\n          document.body.style.overflow = \"unset\";\n        }, 1000);\n      }).catch(err => {\n        setArrErr(arrErr => [...arrErr, err.response.data]);\n      });\n    }\n  };\n\n  useEffect(() => {\n    axios.get(`http://localhost:4000/users/${localStorage.getItem(\"user-id\")}`, {\n      headers: {\n        authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    }).then(res => {\n      setUserInfoFunc(res.data.user);\n      setLogin(true);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n  let uniqueErr,\n      uniqueSuccess = [];\n\n  if (arrErr.length > 0) {\n    uniqueErr = arrErr.filter(function (item, pos) {\n      return arrErr.indexOf(item) === pos;\n    });\n  }\n\n  if (arrSuccess.length > 0) {\n    uniqueSuccess = arrSuccess.filter(function (item, pos) {\n      return arrSuccess.indexOf(item) === pos;\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: props.accountOpen === false ? \"Account displayNone\" : \"Account\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"account-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-header flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, \"My Account\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-close\",\n    onClick: props.clickToClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTimes,\n    className: \"icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }))), login === true && /*#__PURE__*/React.createElement(AccountInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 28\n    }\n  }), login === false && /*#__PURE__*/React.createElement(\"div\", {\n    className: props.accountOpen === false ? \"\" : \"fadeIn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-tab login-tab flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: tabID === 0 ? \"search-tab-cate search-tab-active\" : \"search-tab-cate\",\n    onClick: () => {\n      setTabID(0);\n      setArrErr([]);\n      setArrSuccess([]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: tabID === 1 ? \"search-tab-cate search-tab-active\" : \"search-tab-cate\",\n    onClick: () => {\n      setTabID(1);\n      setArrErr([]);\n      setArrSuccess([]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, \"Register\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-err flex-center flex-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, uniqueErr && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, uniqueErr.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faTimes,\n      style: {\n        marginRight: \"10px\",\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 25\n      }\n    }), item);\n  })), uniqueSuccess && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }, uniqueSuccess.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"login-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faCheck,\n      style: {\n        marginRight: \"10px\",\n        color: \"green\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }\n    }), item);\n  }))), tabID === 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-form login-form fadeToRight\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"flex-col\",\n    onSubmit: handleOnSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    placeholder: \"Email\",\n    name: \"loginEmail\",\n    onChange: handleOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"Password\",\n    name: \"loginPassword\",\n    onChange: handleOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"remember-login flex noselect\",\n    onClick: () => {\n      if (check) {\n        setCheck(false);\n      } else {\n        setCheck(true);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"check-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 21\n    }\n  }), check && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"check-box-active flex-center\",\n    onClick: () => setCheck(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"check-box-active\",\n    icon: faCheck,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 21\n    }\n  }, \"Remember me\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: handleOnSubmit,\n    className: \"btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 19\n    }\n  }, \"LOGIN\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 19\n    }\n  }, \"LOST YOUR PASSWORD?\"))), tabID === 1 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-form login-form fadeToLeft\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"flex-col\",\n    onSubmit: handleOnSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Name\",\n    name: \"registerName\",\n    onChange: handleOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    placeholder: \"Email\",\n    name: \"registerEmail\",\n    onChange: handleOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"Password\",\n    name: \"registerPassword\",\n    onChange: handleOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 19\n    }\n  }, \"REGISTER\"))))));\n}\n\nexport default withRouter(Account);","map":{"version":3,"sources":["C:/Users/Admin/Desktop/freelancerCoder/Ecommerce/frontend/src/components/Header/Account.js"],"names":["React","useContext","useEffect","useState","FontAwesomeIcon","faTimes","faCheck","axios","withRouter","UserContext","AccountInfo","Account","props","setUserInfoFunc","check","setCheck","tabID","setTabID","arrSuccess","setArrSuccess","arrErr","setArrErr","user","setUser","login","setLogin","handleOnChange","event","target","name","value","handleOnSubmit","preventDefault","post","loginEmail","loginPassword","then","res","console","log","setTimeout","window","location","reload","document","body","style","overflow","localStorage","setItem","data","token","_id","catch","err","response","userName","registerName","userEmail","registerEmail","userPassword","registerPassword","userRole","get","getItem","headers","authorization","uniqueErr","uniqueSuccess","length","filter","item","pos","indexOf","accountOpen","clickToClose","map","index","marginRight","color"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport \"../../App.css\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTimes, faCheck } from \"@fortawesome/free-solid-svg-icons\";\r\nimport axios from \"axios\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nimport { UserContext } from \"../../contexts/User\";\r\nimport AccountInfo from \"./AccountInfo\";\r\n\r\nfunction Account(props) {\r\n  const { setUserInfoFunc } = useContext(UserContext);\r\n\r\n  const [check, setCheck] = useState(false);\r\n  const [tabID, setTabID] = useState(0);\r\n  const [arrSuccess, setArrSuccess] = useState([]);\r\n  const [arrErr, setArrErr] = useState([]);\r\n  const [user, setUser] = useState({});\r\n  const [login, setLogin] = useState(false);\r\n\r\n  const handleOnChange = (event) => {\r\n    setUser({ ...user, [event.target.name]: event.target.value });\r\n  };\r\n\r\n  const handleOnSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (tabID === 0) {\r\n      axios\r\n        .post(\"http://localhost:4000/users/login\", {\r\n          loginEmail: user.loginEmail,\r\n          loginPassword: user.loginPassword,\r\n        })\r\n        .then((res) => {\r\n          console.log(res.user);\r\n          setArrSuccess((arrSuccess) => [...arrSuccess, \"Login success!\"]);\r\n          setTimeout(() => {\r\n            window.location.reload(false);\r\n            document.body.style.overflow = \"unset\";\r\n          }, 1000);\r\n          localStorage.setItem(\"token\", res.data.token);\r\n          localStorage.setItem(\"user-id\", res.data.user._id);\r\n        })\r\n        .catch((err) => {\r\n          setArrErr((arrErr) => [...arrErr, err.response.data]);\r\n        });\r\n    } else {\r\n      axios\r\n        .post(\"http://localhost:4000/users/register\", {\r\n          userName: user.registerName,\r\n          userEmail: user.registerEmail,\r\n          userPassword: user.registerPassword,\r\n          userRole: \"user\",\r\n        })\r\n        .then((res) => {\r\n          setArrSuccess((arrSuccess) => [...arrSuccess, res.data]);\r\n          setTimeout(() => {\r\n            window.location.reload(false);\r\n            document.body.style.overflow = \"unset\";\r\n          }, 1000);\r\n        })\r\n        .catch((err) => {\r\n          setArrErr((arrErr) => [...arrErr, err.response.data]);\r\n        });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`http://localhost:4000/users/${localStorage.getItem(\"user-id\")}`, {\r\n        headers: { authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n      })\r\n      .then((res) => {\r\n        setUserInfoFunc(res.data.user);\r\n        setLogin(true);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n\r\n  let uniqueErr,\r\n    uniqueSuccess = [];\r\n  if (arrErr.length > 0) {\r\n    uniqueErr = arrErr.filter(function (item, pos) {\r\n      return arrErr.indexOf(item) === pos;\r\n    });\r\n  }\r\n  if (arrSuccess.length > 0) {\r\n    uniqueSuccess = arrSuccess.filter(function (item, pos) {\r\n      return arrSuccess.indexOf(item) === pos;\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        props.accountOpen === false ? \"Account displayNone\" : \"Account\"\r\n      }\r\n    >\r\n      <div className=\"account-container\">\r\n        <div className=\"search-header flex\">\r\n          <div className=\"search-title\">My Account</div>\r\n          <div className=\"search-close\" onClick={props.clickToClose}>\r\n            <FontAwesomeIcon icon={faTimes} className=\"icon\" />\r\n          </div>\r\n        </div>\r\n\r\n        {login === true && <AccountInfo />}\r\n\r\n        {login === false && (\r\n          <div className={props.accountOpen === false ? \"\" : \"fadeIn\"}>\r\n            <div className=\"search-tab login-tab flex\">\r\n              <div\r\n                className={\r\n                  tabID === 0\r\n                    ? \"search-tab-cate search-tab-active\"\r\n                    : \"search-tab-cate\"\r\n                }\r\n                onClick={() => {\r\n                  setTabID(0);\r\n                  setArrErr([]);\r\n                  setArrSuccess([]);\r\n                }}\r\n              >\r\n                Login\r\n              </div>\r\n              <div\r\n                className={\r\n                  tabID === 1\r\n                    ? \"search-tab-cate search-tab-active\"\r\n                    : \"search-tab-cate\"\r\n                }\r\n                onClick={() => {\r\n                  setTabID(1);\r\n                  setArrErr([]);\r\n                  setArrSuccess([]);\r\n                }}\r\n              >\r\n                Register\r\n              </div>\r\n            </div>\r\n            <div className=\"login-err flex-center flex-col\">\r\n              {uniqueErr && (\r\n                <div>\r\n                  {uniqueErr.map((item, index) => {\r\n                    return (\r\n                      <div key={index}>\r\n                        <FontAwesomeIcon\r\n                          icon={faTimes}\r\n                          style={{ marginRight: \"10px\", color: \"red\" }}\r\n                        />\r\n                        {item}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n              {uniqueSuccess && (\r\n                <div>\r\n                  {uniqueSuccess.map((item, index) => {\r\n                    return (\r\n                      <div key={index} className=\"login-success\">\r\n                        <FontAwesomeIcon\r\n                          icon={faCheck}\r\n                          style={{ marginRight: \"10px\", color: \"green\" }}\r\n                        />\r\n                        {item}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n            </div>\r\n            {tabID === 0 && (\r\n              <div className=\"search-form login-form fadeToRight\">\r\n                <form className=\"flex-col\" onSubmit={handleOnSubmit}>\r\n                  <input\r\n                    type=\"email\"\r\n                    placeholder=\"Email\"\r\n                    name=\"loginEmail\"\r\n                    onChange={handleOnChange}\r\n                  />\r\n                  <input\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    name=\"loginPassword\"\r\n                    onChange={handleOnChange}\r\n                  />\r\n                  <div\r\n                    className=\"remember-login flex noselect\"\r\n                    onClick={() => {\r\n                      if (check) {\r\n                        setCheck(false);\r\n                      } else {\r\n                        setCheck(true);\r\n                      }\r\n                    }}\r\n                  >\r\n                    <div className=\"check-box\"></div>\r\n                    {check && (\r\n                      <div\r\n                        className=\"check-box-active flex-center\"\r\n                        onClick={() => setCheck(false)}\r\n                      >\r\n                        <FontAwesomeIcon\r\n                          className=\"check-box-active\"\r\n                          icon={faCheck}\r\n                        ></FontAwesomeIcon>\r\n                      </div>\r\n                    )}\r\n                    <p>Remember me</p>\r\n                  </div>\r\n                  <button\r\n                    type=\"submit\"\r\n                    onClick={handleOnSubmit}\r\n                    className=\"btn\"\r\n                  >\r\n                    LOGIN\r\n                  </button>\r\n                  <label>LOST YOUR PASSWORD?</label>\r\n                </form>\r\n              </div>\r\n            )}\r\n            {tabID === 1 && (\r\n              <div className=\"search-form login-form fadeToLeft\">\r\n                <form className=\"flex-col\" onSubmit={handleOnSubmit}>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Name\"\r\n                    name=\"registerName\"\r\n                    onChange={handleOnChange}\r\n                  />\r\n                  <input\r\n                    type=\"email\"\r\n                    placeholder=\"Email\"\r\n                    name=\"registerEmail\"\r\n                    onChange={handleOnChange}\r\n                  />\r\n                  <input\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    name=\"registerPassword\"\r\n                    onChange={handleOnChange}\r\n                  />\r\n                  <button className=\"btn\">REGISTER</button>\r\n                </form>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(Account);\r\n"]},"metadata":{},"sourceType":"module"}