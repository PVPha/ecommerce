{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\freelancerCoder\\\\Ecommerce\\\\frontend\\\\src\\\\components\\\\News\\\\NewsBodyWidget.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faFacebookF, faTwitter, faInstagram, faGoogle } from \"@fortawesome/free-brands-svg-icons\";\nimport axios from \"axios\";\nimport { withRouter } from \"react-router-dom\";\n\nfunction NewsBodyWidget(props) {\n  const [news, setNews] = useState([]);\n  const [isSearchFocus, setIsSearchFocus] = useState(false);\n  const [searchInput, setSearchInput] = useState(\"\");\n  let splicedCate = [];\n  let sortedCate = [];\n  const topViews = news.sort((a, b) => b.newView - a.newView).slice(0, 3); //Top view on Category\n\n  if (news.length > 0) {\n    //Get all category\n    const cate = Object.values(news.reduce((a, {\n      newCate\n    }) => {\n      a[newCate] = a[newCate] || {\n        newCate,\n        count: 0\n      };\n      a[newCate].count++;\n      return a;\n    }, Object.create(null))); //Sort and splice category by posts count\n\n    cate.sort((a, b) => b.count - a.count);\n    splicedCate = cate.splice(0, 5);\n    splicedCate.sort((a, b) => b.count - a.count);\n\n    for (let i = 0; i < splicedCate.length; i++) {\n      sortedCate.push(splicedCate[i].newCate);\n    }\n  }\n\n  useEffect(() => {\n    axios.get(`http://localhost:4000/news`).then(res => {\n      setNews(res.data);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newsbody-widget\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, \"Search\"), props.searchErr && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: \"14px\",\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }, props.searchErr), /*#__PURE__*/React.createElement(\"form\", {\n    className: isSearchFocus === true ? \"widget-form widget_search_click\" : \"widget-form\",\n    onSubmit: event => {\n      event.preventDefault();\n      props.setSearchNews(searchInput);\n    },\n    onMouseEnter: () => {\n      setIsSearchFocus(true);\n    },\n    onMouseLeave: () => {\n      setIsSearchFocus(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Search the site\",\n    onChange: event => setSearchInput(event.target.value),\n    value: searchInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, \"Search\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-pop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, \"Popular Posts\"), topViews.map((item, index) => {\n    const date = new Date(item.newTime);\n    const day = date.getDate();\n    const month = date.getMonth() + 1;\n    const year = date.getFullYear();\n    const timeStr = day + \".\" + month + \".\" + year;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"widget-post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"widget-post-img\",\n      style: {\n        backgroundImage: `url(${item.newImg})`\n      },\n      onClick: () => {\n        window.scrollTo(0, 0);\n        props.history.push(`/news/${item._id}`);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"widget-post-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"widget-post-title\",\n      onClick: () => {\n        window.scrollTo(0, 0);\n        props.history.push(`/news/${item._id}`);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }, item.newTitle), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"widget-post-info2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"widget-post-time\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 19\n      }\n    }, timeStr), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"widget-post-view\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 19\n      }\n    }, item.newView, \" view\"))));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-cate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, \"Categorys\"), splicedCate.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"widget-cate-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"widget-cate-div\",\n      onClick: () => {\n        window.scrollTo(0, 0);\n        props.history.push(`/news/category/${item.newCate}`);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, item.newCate), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"widget-cate-count\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }\n    }, item.count)));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-connect\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, \"Stay Connected\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-connect-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faFacebookF,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTwitter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faInstagram,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"widget-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faGoogle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  })))));\n}\n\nexport default withRouter(NewsBodyWidget);","map":{"version":3,"sources":["C:/Users/Admin/Desktop/freelancerCoder/Ecommerce/frontend/src/components/News/NewsBodyWidget.js"],"names":["React","useEffect","useState","FontAwesomeIcon","faFacebookF","faTwitter","faInstagram","faGoogle","axios","withRouter","NewsBodyWidget","props","news","setNews","isSearchFocus","setIsSearchFocus","searchInput","setSearchInput","splicedCate","sortedCate","topViews","sort","a","b","newView","slice","length","cate","Object","values","reduce","newCate","count","create","splice","i","push","get","then","res","data","searchErr","fontSize","color","event","preventDefault","setSearchNews","target","value","map","item","index","date","Date","newTime","day","getDate","month","getMonth","year","getFullYear","timeStr","backgroundImage","newImg","window","scrollTo","history","_id","newTitle"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faFacebookF,\r\n  faTwitter,\r\n  faInstagram,\r\n  faGoogle,\r\n} from \"@fortawesome/free-brands-svg-icons\";\r\nimport axios from \"axios\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nfunction NewsBodyWidget(props) {\r\n  const [news, setNews] = useState([]);\r\n  const [isSearchFocus, setIsSearchFocus] = useState(false);\r\n  const [searchInput, setSearchInput] = useState(\"\");\r\n\r\n  let splicedCate = [];\r\n  let sortedCate = [];\r\n\r\n  const topViews = news.sort((a, b) => b.newView - a.newView).slice(0, 3); //Top view on Category\r\n  if (news.length > 0) {\r\n    //Get all category\r\n    const cate = Object.values(\r\n      news.reduce((a, { newCate }) => {\r\n        a[newCate] = a[newCate] || { newCate, count: 0 };\r\n        a[newCate].count++;\r\n        return a;\r\n      }, Object.create(null))\r\n    );\r\n    //Sort and splice category by posts count\r\n    cate.sort((a, b) => b.count - a.count);\r\n    splicedCate = cate.splice(0, 5);\r\n    splicedCate.sort((a, b) => b.count - a.count);\r\n\r\n    for (let i = 0; i < splicedCate.length; i++) {\r\n      sortedCate.push(splicedCate[i].newCate);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    axios.get(`http://localhost:4000/news`).then((res) => {\r\n      setNews(res.data);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"newsbody-widget\">\r\n      <div className=\"widget-search\">\r\n        <div className=\"widget-title\">Search</div>\r\n        {props.searchErr && (\r\n          <p style={{ fontSize: \"14px\", color: \"red\" }}>{props.searchErr}</p>\r\n        )}\r\n        <form\r\n          className={\r\n            isSearchFocus === true\r\n              ? \"widget-form widget_search_click\"\r\n              : \"widget-form\"\r\n          }\r\n          onSubmit={(event) => {\r\n            event.preventDefault();\r\n            props.setSearchNews(searchInput);\r\n          }}\r\n          onMouseEnter={() => {\r\n            setIsSearchFocus(true);\r\n          }}\r\n          onMouseLeave={() => {\r\n            setIsSearchFocus(false);\r\n          }}\r\n        >\r\n          <input\r\n            placeholder=\"Search the site\"\r\n            onChange={(event) => setSearchInput(event.target.value)}\r\n            value={searchInput}\r\n          ></input>\r\n          <button>Search</button>\r\n        </form>\r\n      </div>\r\n      <div className=\"widget-pop\">\r\n        <div className=\"widget-title\">Popular Posts</div>\r\n        {topViews.map((item, index) => {\r\n          const date = new Date(item.newTime);\r\n          const day = date.getDate();\r\n          const month = date.getMonth() + 1;\r\n          const year = date.getFullYear();\r\n          const timeStr = day + \".\" + month + \".\" + year;\r\n\r\n          return (\r\n            <div key={index} className=\"widget-post\">\r\n              <div\r\n                className=\"widget-post-img\"\r\n                style={{ backgroundImage: `url(${item.newImg})` }}\r\n                onClick={() => {\r\n                  window.scrollTo(0, 0);\r\n                  props.history.push(`/news/${item._id}`);\r\n                }}\r\n              ></div>\r\n              <div className=\"widget-post-info\">\r\n                <div\r\n                  className=\"widget-post-title\"\r\n                  onClick={() => {\r\n                    window.scrollTo(0, 0);\r\n                    props.history.push(`/news/${item._id}`);\r\n                  }}\r\n                >\r\n                  {item.newTitle}\r\n                </div>\r\n                <div className=\"widget-post-info2\">\r\n                  <span className=\"widget-post-time\">{timeStr}</span>\r\n                  <span className=\"widget-post-view\">{item.newView} view</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <div className=\"widget-cate\">\r\n        <div className=\"widget-title\">Categorys</div>\r\n        {splicedCate.map((item, index) => {\r\n          return (\r\n            <div key={index} className=\"widget-cate-container\">\r\n              <div\r\n                className=\"widget-cate-div\"\r\n                onClick={() => {\r\n                  window.scrollTo(0, 0);\r\n                  props.history.push(`/news/category/${item.newCate}`);\r\n                }}\r\n              >\r\n                <div>{item.newCate}</div>\r\n                <div className=\"widget-cate-count\">{item.count}</div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <div className=\"widget-connect\">\r\n        <div className=\"widget-title\">Stay Connected</div>\r\n        <div className=\"widget-connect-container\">\r\n          <div className=\"widget-icon\">\r\n            <FontAwesomeIcon icon={faFacebookF} />\r\n          </div>\r\n          <div className=\"widget-icon\">\r\n            <FontAwesomeIcon icon={faTwitter} />\r\n          </div>\r\n          <div className=\"widget-icon\">\r\n            <FontAwesomeIcon icon={faInstagram} />\r\n          </div>\r\n          <div className=\"widget-icon\">\r\n            <FontAwesomeIcon icon={faGoogle} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* <div className=\"widget-newsletter\">\r\n                <div className=\"widget-title\">Newsletter</div>\r\n                <form className={ isSearchFocus === true ? \"widget-form widget_search_click\" : \"widget-form\"} \r\n                    onMouseEnter={() => { setIsSearchFocus(true)}}\r\n                    onMouseLeave={() => { setIsSearchFocus(false)}}>\r\n                    <input placeholder=\"Enter your email\"></input>\r\n                    <button>Send</button>\r\n                </form>\r\n            </div> */}\r\n    </div>\r\n  );\r\n}\r\nexport default withRouter(NewsBodyWidget);\r\n"]},"metadata":{},"sourceType":"module"}