{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\freelancerCoder\\\\Ecommerce\\\\frontend\\\\src\\\\components\\\\Product\\\\ProductBody.js\";\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport '../../App.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAngleRight, faCartPlus, faChevronLeft, faChevronRight, faHeart, faMinus, faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport { Link } from 'react-router-dom';\nimport ReactStars from \"react-rating-stars-component\";\nimport { CartContext } from '../../contexts/Cart';\nexport default function ProductBody(props) {\n  function slugify(str) {\n    str = str.replace(/^\\s+|\\s+$/g, ''); // trim\n\n    str = str.toLowerCase(); // remove accents, swap ñ for n, etc\n\n    var from = \"ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;\";\n    var to = \"aaaaaeeeeeiiiiooooouuuunc------\";\n\n    for (var i = 0, l = from.length; i < l; i++) {\n      str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));\n    }\n\n    str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars\n    .replace(/\\s+/g, '-') // collapse whitespace and replace by -\n    .replace(/-+/g, '-'); // collapse dashes\n\n    return str; // Trim - from end of text\n  }\n\n  const handleMouseMove = e => {\n    const {\n      left,\n      top,\n      width,\n      height\n    } = e.target.getBoundingClientRect();\n    const x = (e.pageX - left) / width * 100;\n    const y = (e.pageY - top) / height * 100;\n    setZoom(`${x}% ${y}%`);\n  };\n\n  const [imgIndex, setImgIndex] = useState(0);\n  const [countCart, setCountCart] = useState(1);\n  const [hover, setHover] = useState(false);\n  const [zoom, setZoom] = useState(`0% 0%`);\n  const productSmall = useRef(null);\n  useEffect(() => {\n    console.log(hover); // if (hover === false) {\n    //     var interval = setInterval(() => {\n    //         setImgIndex(imgIndex => imgIndex + 1);\n    //     }, 1000);\n    // }\n    // return() => {\n    //     clearInterval(interval);\n    // }\n  }, [hover]);\n  let slugSex = \"\";\n  let ratingList = \"\";\n  let product = \"\";\n  let ratingStar = {};\n\n  if (props.product) {\n    product = props.product;\n    slugSex = \"/\" + slugify(product.productSex === 'Woman' ? 'Women' : 'Men');\n\n    if (imgIndex >= product.productImg.length) {\n      //infinity slider loop\n      // setProductImgBig(productImgBig.concat(props.productImg))\n      setImgIndex(0);\n    }\n\n    if (window.innerWidth > 900) {\n      if (product.productImg.length > 4) {\n        if (imgIndex === 1 || imgIndex === 2) {\n          productSmall.current.style.transform = `translateY(0px)`;\n        } else if (imgIndex === product.productImg.length - 1) {\n          productSmall.current.style.transform = `translateY(-${(imgIndex - 5) * 110 + 50}px)`;\n        } else if (imgIndex === product.productImg.length - 2) {\n          productSmall.current.style.transform = `translateY(-${(imgIndex - 4) * 110 + 50}px)`;\n        } else if (imgIndex === product.productImg.length - 3) {\n          productSmall.current.style.transform = `translateY(-${(imgIndex - 3) * 110 + 50}px)`;\n        } else if (imgIndex > 2) {\n          productSmall.current.style.transform = `translateY(-${(imgIndex - 2) * 110}px)`;\n        } else {\n          if (productSmall.current) {\n            productSmall.current.style.transform = `translateY(0px)`;\n          }\n        }\n      }\n    } else {\n      if (product.productImg.length > 4) {\n        console.log(imgIndex);\n\n        if (imgIndex === 1 || imgIndex === 2) {\n          productSmall.current.style.transform = `translateX(0px)`;\n        } else if (imgIndex === product.productImg.length - 1) {\n          productSmall.current.style.transform = `translateX(-${(imgIndex - 5) * 85 + 105}px)`;\n        } else if (imgIndex === product.productImg.length - 2) {\n          productSmall.current.style.transform = `translateX(-${(imgIndex - 4) * 85 + 105}px)`;\n        } else if (imgIndex === product.productImg.length - 3) {\n          productSmall.current.style.transform = `translateX(-${(imgIndex - 3) * 85 + 105}px)`;\n        } else if (imgIndex > 2) {\n          productSmall.current.style.transform = `translateX(-${(imgIndex - 2) * 85}px)`;\n        } else {\n          if (productSmall.current) {\n            productSmall.current.style.transform = `translateX(0px)`;\n          }\n        }\n      }\n    } //Counting star vote\n\n\n    ratingList = product.productVote.map(a => a.ratingStar); // get all rating\n\n    const totalRating = ratingList.reduce((a, b) => a + b, 0);\n    const averageRating = totalRating / ratingList.length;\n    ratingStar = {\n      size: 12,\n      value: averageRating,\n      edit: false,\n      activeColor: \"#fda32a\",\n      color: \"#ddd\",\n      isHalf: true\n    };\n  }\n\n  let productDate = new Date(product.productDate);\n  let today = new Date();\n  const sliderWidth = useRef(null);\n  const [loading, setLoading] = useState(0);\n  const {\n    addToCart,\n    addToWishList\n  } = useContext(CartContext);\n\n  const cartClick = () => {\n    setLoading(1);\n    setTimeout(() => {\n      setLoading(0);\n      addToCart(product, countCart);\n    }, 500);\n    setCountCart(1);\n  };\n\n  const wishListClick = () => {\n    setLoading(2);\n    setTimeout(() => {\n      setLoading(0);\n      addToWishList(product);\n    }, 500);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ProductBody\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-breadcrumb flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"breadcrumb-item breadcrumb-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, \"Home\"), /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faAngleRight,\n    className: \"breadcrumb-arrow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: slugSex,\n    className: \"breadcrumb-item breadcrumb-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, product.productSex === 'Woman' ? 'Women' : 'Men'), /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faAngleRight,\n    className: \"breadcrumb-arrow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"breadcrumb-item breadcrumb-product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, product.productName)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-detail flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-gallery flex\",\n    onMouseEnter: () => {\n      setHover(true);\n    },\n    onMouseLeave: () => {\n      setHover(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-small\",\n    ref: productSmall,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 21\n    }\n  }, product.productImg && product.productImg.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: imgIndex === index ? \"product-small-item product-small-item-active\" : \"product-small-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: item,\n      onClick: () => {\n        setImgIndex(index);\n      },\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 37\n      }\n    }));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-slider flex\",\n    onMouseMove: handleMouseMove,\n    ref: sliderWidth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-tag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 25\n    }\n  }, product.productSale > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-tag-item sale\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 60\n    }\n  }, product.productSale, \"%\"), product.productSold >= 40 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-tag-item hot\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 62\n    }\n  }, \"HOT\"), (today - productDate) / (1000 * 3600 * 24) < 10 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-tag-item new\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 83\n    }\n  }, \"NEW\")), product.productImg && product.productImg.map((item, index) => {\n    const width = sliderWidth.current.offsetWidth;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"product-big flex\",\n      style: {\n        transform: `translateX(-${width * imgIndex}px`,\n        backgroundImage: `url(${item})`,\n        backgroundPosition: `${zoom}`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"product-big-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      id: index,\n      className: \"nodrag\",\n      style: {\n        width: `${width}px`\n      },\n      src: item,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 41\n      }\n    })));\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"change-product left\",\n    onClick: () => {\n      if (imgIndex > 0) setImgIndex(imgIndex - 1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faChevronLeft,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"change-product right\",\n    onClick: () => {\n      if (imgIndex < product.productImg.length && product.productImg.length) setImgIndex(imgIndex + 1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faChevronRight,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 21\n    }\n  }, product.productName), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-des\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 21\n    }\n  }, product.productDes), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-vote\",\n    onClick: props.scrollOnLick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: '40px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 25\n    }\n  }, Object.keys(ratingStar).length !== 0 && /*#__PURE__*/React.createElement(ReactStars, Object.assign({}, ratingStar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 70\n    }\n  }))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 25\n    }\n  }, \"(\", ratingList.length, \" customer reviews)\")), product.productFinalPrice && product.productFinalPrice < product.productPrice && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      textDecoration: 'line-through',\n      color: '#777',\n      marginRight: '10px',\n      fontSize: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 29\n    }\n  }, product.productPrice.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\"), \" \\u0110\"), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      height: 'max-content'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 29\n    }\n  }, product.productFinalPrice.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\"), \" \\u0110\")), product.productFinalPrice && product.productFinalPrice === product.productPrice && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 25\n    }\n  }, product.productPrice.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\"), \" \\u0110\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-cart flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"count-cart noselect\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"count-cart-item left flex-center\",\n    onClick: () => {\n      if (countCart > 1) setCountCart(countCart - 1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faMinus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"count-cart-item text flex-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: countCart,\n    onChange: e => {\n      setCountCart(Number(e.target.value.replace(/\\D+/g, '')));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"count-cart-item right flex-center\",\n    onClick: () => {\n      setCountCart(countCart + 1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faPlus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 33\n    }\n  }))), loading === 1 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-addtocart flex-center btn\",\n    onClick: cartClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 33\n    }\n  })), loading !== 1 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-addtocart flex-center btn\",\n    onClick: cartClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCartPlus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 33\n    }\n  }, \"Add to cart\")), loading === 2 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-wishlist flex-center\",\n    onClick: cartClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 33\n    }\n  })), loading !== 2 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-wishlist flex-center\",\n    onClick: wishListClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faHeart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-cate flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 25\n    }\n  }, \"Category:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 25\n    }\n  }, product.productCate)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-info-line mobile-disable-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 13\n    }\n  }));\n}","map":{"version":3,"sources":["C:/Users/Admin/Desktop/freelancerCoder/Ecommerce/frontend/src/components/Product/ProductBody.js"],"names":["React","useContext","useEffect","useRef","useState","FontAwesomeIcon","faAngleRight","faCartPlus","faChevronLeft","faChevronRight","faHeart","faMinus","faPlus","Link","ReactStars","CartContext","ProductBody","props","slugify","str","replace","toLowerCase","from","to","i","l","length","RegExp","charAt","handleMouseMove","e","left","top","width","height","target","getBoundingClientRect","x","pageX","y","pageY","setZoom","imgIndex","setImgIndex","countCart","setCountCart","hover","setHover","zoom","productSmall","console","log","slugSex","ratingList","product","ratingStar","productSex","productImg","window","innerWidth","current","style","transform","productVote","map","a","totalRating","reduce","b","averageRating","size","value","edit","activeColor","color","isHalf","productDate","Date","today","sliderWidth","loading","setLoading","addToCart","addToWishList","cartClick","setTimeout","wishListClick","productName","item","index","productSale","productSold","offsetWidth","backgroundImage","backgroundPosition","productDes","scrollOnLick","Object","keys","productFinalPrice","productPrice","textDecoration","marginRight","fontSize","toString","Number","productCate"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useRef, useState } from 'react';\r\nimport '../../App.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport {  faAngleRight, faCartPlus, faChevronLeft, faChevronRight, faHeart, faMinus, faPlus } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { Link } from 'react-router-dom';\r\nimport ReactStars from \"react-rating-stars-component\";\r\nimport { CartContext } from '../../contexts/Cart';\r\n\r\nexport default function ProductBody(props) {\r\n\r\n    function slugify(str){\r\n            str = str.replace(/^\\s+|\\s+$/g, ''); // trim\r\n            str = str.toLowerCase();\r\n\r\n            // remove accents, swap ñ for n, etc\r\n            var from = \"ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;\";\r\n            var to   = \"aaaaaeeeeeiiiiooooouuuunc------\";\r\n            for (var i=0, l=from.length ; i<l ; i++) {\r\n                str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));\r\n            }\r\n\r\n            str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars\r\n                .replace(/\\s+/g, '-') // collapse whitespace and replace by -\r\n                .replace(/-+/g, '-'); // collapse dashes\r\n\r\n            return str;    // Trim - from end of text\r\n    }\r\n    const handleMouseMove = (e) => {\r\n        const { left, top, width, height } = e.target.getBoundingClientRect();\r\n        const x = ((e.pageX - left) / width) * 100;\r\n        const y = ((e.pageY - top) / height) * 100;\r\n        setZoom(`${x}% ${y}%`);\r\n    };\r\n\r\n    const [imgIndex, setImgIndex] = useState(0);\r\n    const [countCart, setCountCart] = useState(1);\r\n    const [hover, setHover] = useState(false);\r\n    const [zoom, setZoom] = useState(`0% 0%`);\r\n    const productSmall = useRef(null);\r\n\r\n    useEffect(() => {\r\n        console.log(hover)\r\n        // if (hover === false) {\r\n        //     var interval = setInterval(() => {\r\n        //         setImgIndex(imgIndex => imgIndex + 1);\r\n        //     }, 1000);\r\n        // }\r\n        // return() => {\r\n        //     clearInterval(interval);\r\n        // }\r\n    },[hover])\r\n\r\n    let slugSex = \"\";\r\n    let ratingList = \"\";\r\n    let product = \"\";\r\n    let ratingStar = {};\r\n    if (props.product) {\r\n        product = props.product;\r\n        slugSex = \"/\" + slugify(product.productSex === 'Woman' ? 'Women' : 'Men');\r\n        if (imgIndex >= product.productImg.length) { //infinity slider loop\r\n            // setProductImgBig(productImgBig.concat(props.productImg))\r\n            setImgIndex(0);\r\n        }\r\n\r\n        if (window.innerWidth > 900) {\r\n            if (product.productImg.length > 4) {\r\n                if (imgIndex === 1 || imgIndex === 2) {\r\n                    productSmall.current.style.transform= `translateY(0px)`\r\n                } else if (imgIndex === product.productImg.length - 1) {\r\n                    productSmall.current.style.transform= `translateY(-${(imgIndex-5) * 110 + 50}px)`\r\n                } else if (imgIndex === product.productImg.length - 2) {\r\n                    productSmall.current.style.transform= `translateY(-${(imgIndex-4) * 110 + 50}px)`\r\n                } else if (imgIndex === product.productImg.length - 3) {\r\n                    productSmall.current.style.transform= `translateY(-${(imgIndex-3) * 110 + 50}px)`\r\n                } else if (imgIndex > 2) {\r\n                    productSmall.current.style.transform= `translateY(-${(imgIndex-2) * 110}px)`\r\n                } else {\r\n                    if (productSmall.current) {\r\n                        productSmall.current.style.transform= `translateY(0px)`\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if (product.productImg.length > 4) {\r\n                console.log(imgIndex)\r\n                if (imgIndex === 1 || imgIndex === 2) {\r\n                    productSmall.current.style.transform= `translateX(0px)`\r\n                } else if (imgIndex === product.productImg.length - 1) {\r\n                    productSmall.current.style.transform= `translateX(-${(imgIndex-5) * 85 + 105}px)`\r\n                } else if (imgIndex === product.productImg.length - 2) {\r\n                    productSmall.current.style.transform= `translateX(-${(imgIndex-4) * 85 + 105}px)`\r\n                } else if (imgIndex === product.productImg.length - 3) {\r\n                    productSmall.current.style.transform= `translateX(-${(imgIndex-3) * 85 + 105}px)`\r\n                } else if (imgIndex > 2) {\r\n                    productSmall.current.style.transform= `translateX(-${(imgIndex-2) * 85}px)`\r\n                } else {\r\n                    if (productSmall.current) {\r\n                        productSmall.current.style.transform= `translateX(0px)`\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        //Counting star vote\r\n        ratingList = product.productVote.map(a => a.ratingStar); // get all rating\r\n        const totalRating = ratingList.reduce((a, b) => a + b, 0)\r\n\r\n        const averageRating = totalRating/ratingList.length;\r\n        ratingStar = {\r\n            size: 12,\r\n            value: averageRating,\r\n            edit: false,\r\n            activeColor: \"#fda32a\",\r\n            color: \"#ddd\",\r\n            isHalf: true\r\n        }\r\n    }\r\n    let productDate = new Date(product.productDate) \r\n    let today = new Date()\r\n\r\n    const sliderWidth = useRef(null)\r\n    const [loading, setLoading] = useState(0)\r\n    const { \r\n        addToCart,\r\n        addToWishList\r\n    } = useContext(CartContext);\r\n    const cartClick = () => { \r\n        setLoading(1)\r\n        setTimeout(()=>{\r\n            setLoading(0) \r\n            addToCart(product, countCart) \r\n        }, 500)\r\n        setCountCart(1)\r\n    }\r\n    const wishListClick = () => {\r\n        setLoading(2)\r\n        setTimeout(()=>{\r\n            setLoading(0)\r\n            addToWishList(product)\r\n        }, 500)\r\n    }\r\n\r\n    return(\r\n        <div className=\"ProductBody\">\r\n            <div className=\"product-breadcrumb flex\">\r\n                <Link to=\"/\" className=\"breadcrumb-item breadcrumb-link\">Home</Link>\r\n                <FontAwesomeIcon icon={ faAngleRight } className=\"breadcrumb-arrow\"/>\r\n                <Link to={slugSex} className=\"breadcrumb-item breadcrumb-link\">{product.productSex === 'Woman' ? 'Women' : 'Men'}</Link>\r\n                <FontAwesomeIcon icon={ faAngleRight } className=\"breadcrumb-arrow\"/>\r\n                <div className=\"breadcrumb-item breadcrumb-product\">{product.productName}</div>\r\n            </div>\r\n\r\n            <div className=\"product-detail flex\">\r\n                <div className=\"product-gallery flex\"\r\n                    onMouseEnter={()=> {setHover(true)}}\r\n                    onMouseLeave={()=> {setHover(false)}}>\r\n                    <div \r\n                        className=\"product-small\" ref={productSmall}\r\n                        >\r\n                        {product.productImg && product.productImg.map((item, index) => {\r\n                            return (\r\n                                <div \r\n                                    key={index}\r\n                                    className={imgIndex === index ? \"product-small-item product-small-item-active\" : \"product-small-item\"}>\r\n                                    <img \r\n                                        src={item}\r\n                                        onClick={()=>{ setImgIndex(index)}}\r\n                                        alt=\"\"\r\n                                        ></img>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                    <div\r\n                        className=\"product-slider flex\"\r\n                        onMouseMove={handleMouseMove}\r\n                        ref={sliderWidth}\r\n                        >\r\n                        <div className=\"product-tag\">\r\n                            {\r\n                                product.productSale > 0 && <div className=\"product-tag-item sale\">\r\n                                    {product.productSale}%\r\n                                </div>\r\n                            }\r\n                            {\r\n                                product.productSold >= 40 && <div className=\"product-tag-item hot\">\r\n                                    HOT\r\n                                </div>\r\n                            }\r\n                            {\r\n                                (today - productDate)/ (1000 * 3600 * 24) < 10 && <div className=\"product-tag-item new\">\r\n                                    NEW \r\n                                </div>\r\n                            }\r\n                        </div>\r\n                        {product.productImg && product.productImg.map((item, index) => {\r\n                            const width = sliderWidth.current.offsetWidth;\r\n                            return (\r\n                                <div\r\n                                    key={index}\r\n                                    className=\"product-big flex\" \r\n                                    style={{ \r\n                                        transform: `translateX(-${width * imgIndex}px`,\r\n                                        backgroundImage: `url(${item})`,\r\n                                        backgroundPosition: `${zoom}`\r\n                                    }}>\r\n                                    <div className=\"product-big-item\">\r\n                                        <img \r\n                                            id={index}\r\n                                            className=\"nodrag\"\r\n                                            style={{ width: `${width}px`}}\r\n                                            src={item}\r\n                                            alt=\"\"\r\n                                            ></img>\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                        <div \r\n                            className=\"change-product left\"\r\n                            onClick={()=> {\r\n                                if (imgIndex > 0) setImgIndex(imgIndex - 1)\r\n                            }}\r\n                            >\r\n                            <FontAwesomeIcon icon={faChevronLeft}></FontAwesomeIcon>\r\n                        </div>\r\n                        <div className=\"change-product right\"\r\n                            onClick={()=> {\r\n                                if (imgIndex < product.productImg.length && product.productImg.length) setImgIndex(imgIndex + 1)\r\n                            }}\r\n                            >\r\n                            <FontAwesomeIcon icon={faChevronRight}></FontAwesomeIcon>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"product-info-detail\">\r\n                    <div className=\"product-info-title\">\r\n                        {product.productName}\r\n                    </div>\r\n                    <div className=\"product-info-des\">\r\n                        {product.productDes}\r\n                    </div>\r\n                    <div \r\n                        className=\"product-info-vote\"\r\n                        onClick={props.scrollOnLick}\r\n                        >\r\n                        <div style={{height: '40px'}}>\r\n                            {Object.keys(ratingStar).length !== 0 && <ReactStars {...ratingStar} />}\r\n                        </div>\r\n                        <p>\r\n                            ({ratingList.length} customer reviews)\r\n                        </p>\r\n                    </div>\r\n\r\n                    {\r\n                        product.productFinalPrice && product.productFinalPrice < product.productPrice &&\r\n                        <div className=\"product-info-price\">\r\n                            <span style={{textDecoration: 'line-through', color: '#777', marginRight: '10px', fontSize: '10px'}}>{product.productPrice.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")} Đ</span>\r\n                            <span style={{height: 'max-content'}}>{product.productFinalPrice.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")} Đ</span>\r\n                        </div>\r\n                    }\r\n                    {\r\n                        product.productFinalPrice && product.productFinalPrice === product.productPrice &&\r\n                        <div className=\"product-info-price\">\r\n                            {(product.productPrice).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")} Đ\r\n                        </div>\r\n                    } \r\n                    <div className=\"product-info-cart flex\">\r\n                        <div className=\"count-cart noselect\">\r\n                            <div className=\"count-cart-item left flex-center\"\r\n                                onClick={() => { \r\n                                    if (countCart > 1) setCountCart(countCart-1) \r\n                                }}\r\n                                >\r\n                                <FontAwesomeIcon icon={faMinus}/>\r\n                            </div> \r\n                            <div className=\"count-cart-item text flex-center\">\r\n                                <form>\r\n                                    <input \r\n                                        type=\"text\" \r\n                                        value={countCart}\r\n                                        onChange={(e) => { \r\n                                            setCountCart(Number(e.target.value.replace(/\\D+/g, ''))) \r\n                                        }}\r\n                                    />\r\n                                </form>\r\n                            </div>\r\n                            <div \r\n                                className=\"count-cart-item right flex-center\"\r\n                                onClick={() => { setCountCart(countCart+1) }}\r\n                                >\r\n                                <FontAwesomeIcon icon={faPlus}/>\r\n                            </div>\r\n                        </div>\r\n                        { loading === 1 && \r\n                            <div className=\"product-info-addtocart flex-center btn\" onClick={cartClick} >\r\n                                <div className=\"loading-icon\"></div> \r\n                            </div>\r\n                        }\r\n                        { loading !== 1 &&  \r\n                            <div className=\"product-info-addtocart flex-center btn\" onClick={cartClick} >\r\n                                <FontAwesomeIcon icon={faCartPlus}/>\r\n                                <p>Add to cart</p>\r\n                            </div>\r\n                        }\r\n                        { loading === 2 && \r\n                            <div className=\"product-info-wishlist flex-center\" onClick={cartClick} >\r\n                                <div className=\"loading-icon\"></div>\r\n                            </div>\r\n                        }\r\n                        { loading !== 2 &&  \r\n                            <div \r\n                                className=\"product-info-wishlist flex-center\"  onClick={wishListClick}>\r\n                                <FontAwesomeIcon icon={faHeart}></FontAwesomeIcon>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                    <div className=\"product-info-line\"></div>\r\n                    <div className=\"product-info-cate flex\">\r\n                        <p>Category:</p>\r\n                        <p>{product.productCate}</p>\r\n                    </div>\r\n                    <div className=\"product-info-line\"></div>\r\n                </div>\r\n            </div>\r\n            <div className=\"product-info-line mobile-disable-line\"></div>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}