{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\freelancerCoder\\\\Ecommerce\\\\frontend\\\\src\\\\components\\\\admin\\\\Dashboard\\\\Collection\\\\DashboardCollectionEdit.js\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport axios from \"axios\";\nexport default function DashboardCollectionEdit(props) {\n  const createForm = useRef();\n  const [collectionName, setCollectionName] = useState(\"\");\n  const [collectionBanner, setCollectionBanner] = useState([]);\n  const [product, setProduct] = useState([]);\n  const [productList, setProductList] = useState([]);\n  const [file, setFile] = useState([]);\n  const collection = props.collection;\n  useEffect(() => {\n    axios.get(`http://be-ecommerce-year4.herokuapp.com/products`).then(res => {\n      setProduct(res.data);\n    });\n\n    if (collection) {\n      setCollectionBanner([collection.collectionBanner]);\n      setCollectionName(collection.collectionName);\n      setProductList(collection.collectionItems);\n    }\n  }, [collection]);\n\n  const onSubmit = event => {\n    event.preventDefault();\n    event.preventDefault();\n    const config = {\n      headers: {\n        \"content-type\": \"multipart/form-data\"\n      }\n    };\n    const formData = new FormData();\n    const imageArr = Array.from(file);\n    imageArr.forEach(image => {\n      formData.append(\"collectionBanner\", image);\n    });\n    formData.append(\"productList\", JSON.stringify(productList));\n    formData.append(\"collectionName\", collectionName);\n    axios.post(`http://be-ecommerce-year4.herokuapp.com/collection/update/${collection._id}`, formData, config).then(() => {\n      props.setCloseEditFunc(false);\n      props.setToastFunc(true);\n    });\n  };\n\n  const deleteImg = event => {\n    const virutalFile = [...file];\n    virutalFile.splice(event.target.id, 1);\n    setFile(virutalFile);\n    const items = [...collectionBanner];\n    items.splice(event.target.id, 1);\n    setCollectionBanner(items);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"DashboardProductInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, \"Order infomation\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-title-close flex-center\",\n    onClick: () => {\n      props.setCloseEditFunc(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTimes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    encType: \"multipart/form-data\",\n    ref: createForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    value: collectionName || \"\",\n    onChange: event => {\n      setCollectionName(event.target.value);\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, \"Collection Banner \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: event => {\n      const files = event.target.files;\n\n      for (let i = 0; i < files.length; i++) {\n        setCollectionBanner(news => [...news, URL.createObjectURL(files[i])]);\n      }\n\n      const fileArr = Array.prototype.slice.call(files);\n      fileArr.forEach(item => {\n        setFile(file => [...file, item]);\n      });\n    },\n    type: \"file\",\n    className: \"noborder\",\n    multiple: \"multiple\",\n    style: {\n      height: \"50px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    style: {\n      overflowY: \"hidden\",\n      flexWrap: \"wrap\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, collectionBanner && collectionBanner.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"create-box-img\",\n      style: {\n        width: \"130px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      key: index,\n      src: item,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"create-box-img-overlay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      id: index,\n      onClick: deleteImg,\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 27\n      }\n    }, \"X\")));\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create-box-row flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-left flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, \"Items\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"input\",\n    style: {\n      height: \"25px\",\n      marginBottom: \"10px\"\n    },\n    value: \"\",\n    onChange: event => {\n      const isExists = (cartItems = [], item = {}) => {\n        for (let cartItem of cartItems) {\n          if (cartItem._id === item._id) {\n            return cartItem;\n          }\n        }\n\n        return false;\n      };\n\n      const value = event.target.value;\n      const virtualCart = [...productList];\n\n      if (productList.length === 0) {\n        virtualCart.push({ ...JSON.parse(value),\n          count: 1\n        });\n      } else {\n        if (!isExists(productList, JSON.parse(value))) {\n          virtualCart.push({ ...JSON.parse(value),\n            count: 1\n          });\n        } else {\n          for (let i = 0; i < virtualCart.length; i++) {\n            if (virtualCart[i]._id === JSON.parse(value)._id) {\n              virtualCart[i].count += 1;\n              break;\n            }\n          }\n        }\n      }\n\n      setProductList(virtualCart);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    selected: true,\n    value: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }\n  }, \"select a product\"), product.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      value: JSON.stringify(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    }, \"Name: \", item.productName, \", Price:\", \" \", item.productFinalPrice.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\"));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    style: {\n      overflowY: \"hidden\",\n      flexWrap: \"wrap\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 15\n    }\n  }, productList && productList.map((item, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"order-list-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"data:image/png;base64,\" + item.productImg[0],\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        width: \"55%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 25\n      }\n    }, item.productName), /*#__PURE__*/React.createElement(\"div\", {\n      id: index,\n      className: \"delete-order-item flex-center\",\n      onClick: event => {\n        var arr = [];\n        const id = event.target.id;\n\n        for (let i in productList) {\n          if (i !== id) {\n            arr.push(productList[i]);\n          }\n        }\n\n        setProductList(arr);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      style: {\n        pointerEvents: \"none\"\n      },\n      icon: faTimes,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 27\n      }\n    })));\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-center\",\n    style: {\n      marginTop: \"40px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"create-box-btn btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }\n  }, \"Update collection\")))));\n}","map":{"version":3,"sources":["C:/Users/Admin/Desktop/freelancerCoder/Ecommerce/frontend/src/components/admin/Dashboard/Collection/DashboardCollectionEdit.js"],"names":["React","useEffect","useRef","useState","FontAwesomeIcon","faTimes","axios","DashboardCollectionEdit","props","createForm","collectionName","setCollectionName","collectionBanner","setCollectionBanner","product","setProduct","productList","setProductList","file","setFile","collection","get","then","res","data","collectionItems","onSubmit","event","preventDefault","config","headers","formData","FormData","imageArr","Array","from","forEach","image","append","JSON","stringify","post","_id","setCloseEditFunc","setToastFunc","deleteImg","virutalFile","splice","target","id","items","value","files","i","length","news","URL","createObjectURL","fileArr","prototype","slice","call","item","height","overflowY","flexWrap","map","index","width","marginBottom","isExists","cartItems","cartItem","virtualCart","push","parse","count","productName","productFinalPrice","toString","replace","productImg","arr","pointerEvents","marginTop"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\r\nimport axios from \"axios\";\r\n\r\nexport default function DashboardCollectionEdit(props) {\r\n  const createForm = useRef();\r\n\r\n  const [collectionName, setCollectionName] = useState(\"\");\r\n  const [collectionBanner, setCollectionBanner] = useState([]);\r\n  const [product, setProduct] = useState([]);\r\n  const [productList, setProductList] = useState([]);\r\n  const [file, setFile] = useState([]);\r\n\r\n  const collection = props.collection;\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`http://be-ecommerce-year4.herokuapp.com/products`)\r\n      .then((res) => {\r\n        setProduct(res.data);\r\n      });\r\n    if (collection) {\r\n      setCollectionBanner([collection.collectionBanner]);\r\n      setCollectionName(collection.collectionName);\r\n      setProductList(collection.collectionItems);\r\n    }\r\n  }, [collection]);\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    event.preventDefault();\r\n    const config = {\r\n      headers: {\r\n        \"content-type\": \"multipart/form-data\",\r\n      },\r\n    };\r\n\r\n    const formData = new FormData();\r\n    const imageArr = Array.from(file);\r\n    imageArr.forEach((image) => {\r\n      formData.append(\"collectionBanner\", image);\r\n    });\r\n    formData.append(\"productList\", JSON.stringify(productList));\r\n    formData.append(\"collectionName\", collectionName);\r\n    axios\r\n      .post(\r\n        `http://be-ecommerce-year4.herokuapp.com/collection/update/${collection._id}`,\r\n        formData,\r\n        config\r\n      )\r\n      .then(() => {\r\n        props.setCloseEditFunc(false);\r\n        props.setToastFunc(true);\r\n      });\r\n  };\r\n\r\n  const deleteImg = (event) => {\r\n    const virutalFile = [...file];\r\n    virutalFile.splice(event.target.id, 1);\r\n    setFile(virutalFile);\r\n\r\n    const items = [...collectionBanner];\r\n    items.splice(event.target.id, 1);\r\n    setCollectionBanner(items);\r\n  };\r\n\r\n  return (\r\n    <div className=\"DashboardProductInfo\">\r\n      <div className=\"create-box\">\r\n        <div className=\"create-box-title flex\">\r\n          <div className=\"create-box-title-text\">Order infomation</div>\r\n          <div\r\n            className=\"create-box-title-close flex-center\"\r\n            onClick={() => {\r\n              props.setCloseEditFunc(false);\r\n            }}\r\n          >\r\n            <FontAwesomeIcon icon={faTimes} />\r\n          </div>\r\n        </div>\r\n        <form\r\n          onSubmit={onSubmit}\r\n          encType=\"multipart/form-data\"\r\n          ref={createForm}\r\n        >\r\n          <div className=\"create-box-row flex\">\r\n            <div className=\"dashboard-left flex\">Name</div>\r\n            <div className=\"dashboard-right\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"name\"\r\n                value={collectionName || \"\"}\r\n                onChange={(event) => {\r\n                  setCollectionName(event.target.value);\r\n                }}\r\n                required\r\n              ></input>\r\n            </div>\r\n          </div>\r\n          <div className=\"create-box-row flex\">\r\n            <div className=\"dashboard-left flex\">Collection Banner </div>\r\n            <div className=\"dashboard-right\">\r\n              <input\r\n                onChange={(event) => {\r\n                  const files = event.target.files;\r\n                  for (let i = 0; i < files.length; i++) {\r\n                    setCollectionBanner((news) => [\r\n                      ...news,\r\n                      URL.createObjectURL(files[i]),\r\n                    ]);\r\n                  }\r\n                  const fileArr = Array.prototype.slice.call(files);\r\n                  fileArr.forEach((item) => {\r\n                    setFile((file) => [...file, item]);\r\n                  });\r\n                }}\r\n                type=\"file\"\r\n                className=\"noborder\"\r\n                multiple=\"multiple\"\r\n                style={{ height: \"50px\" }}\r\n              ></input>\r\n              <div\r\n                className=\"flex\"\r\n                style={{ overflowY: \"hidden\", flexWrap: \"wrap\" }}\r\n              >\r\n                {collectionBanner &&\r\n                  collectionBanner.map((item, index) => {\r\n                    return (\r\n                      <div\r\n                        key={index}\r\n                        className=\"create-box-img\"\r\n                        style={{ width: \"130px\" }}\r\n                      >\r\n                        <img key={index} src={item} alt=\"\"></img>\r\n                        <div className=\"create-box-img-overlay\">\r\n                          <p id={index} onClick={deleteImg} className=\"icon\">\r\n                            X\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"create-box-row flex\">\r\n            <div className=\"dashboard-left flex\">Items</div>\r\n            <div className=\"dashboard-right\">\r\n              <select\r\n                className=\"input\"\r\n                style={{ height: \"25px\", marginBottom: \"10px\" }}\r\n                value={\"\"}\r\n                onChange={(event) => {\r\n                  const isExists = (cartItems = [], item = {}) => {\r\n                    for (let cartItem of cartItems) {\r\n                      if (cartItem._id === item._id) {\r\n                        return cartItem;\r\n                      }\r\n                    }\r\n                    return false;\r\n                  };\r\n\r\n                  const value = event.target.value;\r\n                  const virtualCart = [...productList];\r\n                  if (productList.length === 0) {\r\n                    virtualCart.push({ ...JSON.parse(value), count: 1 });\r\n                  } else {\r\n                    if (!isExists(productList, JSON.parse(value))) {\r\n                      virtualCart.push({ ...JSON.parse(value), count: 1 });\r\n                    } else {\r\n                      for (let i = 0; i < virtualCart.length; i++) {\r\n                        if (virtualCart[i]._id === JSON.parse(value)._id) {\r\n                          virtualCart[i].count += 1;\r\n                          break;\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  setProductList(virtualCart);\r\n                }}\r\n              >\r\n                <option selected value>\r\n                  select a product\r\n                </option>\r\n                {product.map((item, index) => {\r\n                  return (\r\n                    <option key={index} value={JSON.stringify(item)}>\r\n                      Name: {item.productName}, Price:{\" \"}\r\n                      {item.productFinalPrice\r\n                        .toString()\r\n                        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n              <div\r\n                className=\"\"\r\n                style={{ overflowY: \"hidden\", flexWrap: \"wrap\" }}\r\n              >\r\n                {productList &&\r\n                  productList.map((item, index) => {\r\n                    return (\r\n                      <div key={index} className=\"order-list-item\">\r\n                        <img\r\n                          src={\"data:image/png;base64,\" + item.productImg[0]}\r\n                          alt=\"\"\r\n                        ></img>\r\n                        <p style={{ width: \"55%\" }}>{item.productName}</p>\r\n                        <div\r\n                          id={index}\r\n                          className=\"delete-order-item flex-center\"\r\n                          onClick={(event) => {\r\n                            var arr = [];\r\n                            const id = event.target.id;\r\n                            for (let i in productList) {\r\n                              if (i !== id) {\r\n                                arr.push(productList[i]);\r\n                              }\r\n                            }\r\n                            setProductList(arr);\r\n                          }}\r\n                        >\r\n                          <FontAwesomeIcon\r\n                            style={{ pointerEvents: \"none\" }}\r\n                            icon={faTimes}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex-center\" style={{ marginTop: \"40px\" }}>\r\n            <button className=\"create-box-btn btn\">Update collection</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}